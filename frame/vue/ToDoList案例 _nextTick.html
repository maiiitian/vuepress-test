<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.61">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>ToDoList案例 $nextTick | Naitiam的博客 ！</title><meta name="description" content="这是我的第一个 VuePress 站点">
    <link rel="preload" href="/vuepress-test/assets/style-7de52d45.css" as="style"><link rel="stylesheet" href="/vuepress-test/assets/style-7de52d45.css">
    <link rel="modulepreload" href="/vuepress-test/assets/app-f05730ba.js"><link rel="modulepreload" href="/vuepress-test/assets/framework-5866ffd3.js"><link rel="modulepreload" href="/vuepress-test/assets/ToDoList案例 _nextTick.html-c0809275.js"><link rel="modulepreload" href="/vuepress-test/assets/ToDoList案例 _nextTick.html-ab5cbac0.js"><link rel="prefetch" href="/vuepress-test/assets/index.html-c3e88272.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/index.html-bb2219ad.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/Vue CLI脚手架.html-6c75f344.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/Vue管理CSS样式.html-bc9a8c8b.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/index.html-9e4d4a11.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/localStorage本地存储.html-468bf368.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/ref属性 父传子 mixin plugin scoped.html-4cbbaee0.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/事件处理 键盘事件.html-de954a83.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/全局事件总线 消息的发布与订阅.html-d771a380.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/初识 MVVM 数据绑定.html-652f011f.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/指令.html-b962db76.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/条件渲染 列表渲染.html-5610c917.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/生命周期.html-c51b02dd.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/自定义事件 子传父.html-741e049b.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/表单提交 过滤器.html-bba37145.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/计算属性 监视属性.html-07a16abc.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/过渡与动画.html-67309816.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/配置代理.html-3c24a4bb.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/随手笔记.html-0c4bfc26.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/index.html-3f40158e.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/开始一个Nuxt3项目.html-e5a6ab79.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/文章目录.html-dc897592.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/项目介绍.html-b58bd9fc.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/index.html-63fc55b7.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/404.html-60b35caa.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/index.html-b809455c.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/index.html-405f14fb.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/Vue CLI脚手架.html-aa86bff0.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/Vue管理CSS样式.html-74fc5542.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/index.html-d6dd95a2.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/localStorage本地存储.html-aced20be.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/ref属性 父传子 mixin plugin scoped.html-bc046ab6.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/事件处理 键盘事件.html-b27e7cfa.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/全局事件总线 消息的发布与订阅.html-034fda98.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/初识 MVVM 数据绑定.html-2b6d9774.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/指令.html-8a8fbf89.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/条件渲染 列表渲染.html-9354b435.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/生命周期.html-16f73b7c.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/自定义事件 子传父.html-180d9848.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/表单提交 过滤器.html-e6d7e667.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/计算属性 监视属性.html-8fe04a5d.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/过渡与动画.html-f236c096.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/配置代理.html-93e5a61d.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/随手笔记.html-07310412.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/index.html-a8777552.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/开始一个Nuxt3项目.html-08062d89.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/文章目录.html-1ad73cba.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/项目介绍.html-a79f0b81.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/index.html-4f4f12e8.js" as="script"><link rel="prefetch" href="/vuepress-test/assets/404.html-87d54bd8.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container no-sidebar"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/vuepress-test/" class=""><!----><span class="site-name">Naitiam的博客 ！</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/vuepress-test/" class="" aria-label="主页"><!--[--><!--]--> 主页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端技术"><span class="title">前端技术</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端技术"><span class="title">前端技术</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/vuepress-test/html" class="" aria-label="html"><!--[--><!--]--> html <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/vuepress-test/css" class="" aria-label="css"><!--[--><!--]--> css <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/vuepress-test/js" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>框架</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/vuepress-test/frame/vue" class="router-link-active" aria-label="vue"><!--[--><!--]--> vue <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/vuepress-test/vite" class="" aria-label="vite"><!--[--><!--]--> vite <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/vuepress-test/nuxt" class="" aria-label="nuxt"><!--[--><!--]--> nuxt <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>项目总结</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/vuepress-test/summary/juejin" class="" aria-label="仿掘金项目"><!--[--><!--]--> 仿掘金项目 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/vuepress-test/summary/view" class="" aria-label="数据可视化"><!--[--><!--]--> 数据可视化 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/maiiitian" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/vuepress-test/" class="" aria-label="主页"><!--[--><!--]--> 主页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端技术"><span class="title">前端技术</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端技术"><span class="title">前端技术</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/vuepress-test/html" class="" aria-label="html"><!--[--><!--]--> html <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/vuepress-test/css" class="" aria-label="css"><!--[--><!--]--> css <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/vuepress-test/js" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>框架</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/vuepress-test/frame/vue" class="router-link-active" aria-label="vue"><!--[--><!--]--> vue <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/vuepress-test/vite" class="" aria-label="vite"><!--[--><!--]--> vite <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/vuepress-test/nuxt" class="" aria-label="nuxt"><!--[--><!--]--> nuxt <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>项目总结</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/vuepress-test/summary/juejin" class="" aria-label="仿掘金项目"><!--[--><!--]--> 仿掘金项目 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/vuepress-test/summary/view" class="" aria-label="数据可视化"><!--[--><!--]--> 数据可视化 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/maiiitian" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><!----><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h2 id="目录" tabindex="-1"><a class="header-anchor" href="#目录" aria-hidden="true">#</a> 目录</h2><ul><li><p><a href="#todolist%E6%A1%88%E4%BE%8B-nexttick">ToDoList案例 $nextTick</a></p></li><li><p><a href="#nexttick">$nextTick</a></p></li><li><p><a href="#todolist%E6%A1%88%E4%BE%8B">ToDoList案例</a></p></li></ul><h1 id="todolist案例-nexttick" tabindex="-1"><a class="header-anchor" href="#todolist案例-nexttick" aria-hidden="true">#</a> ToDoList案例 $nextTick</h1><h1 id="nexttick" tabindex="-1"><a class="header-anchor" href="#nexttick" aria-hidden="true">#</a> $nextTick</h1><p>语法： <code>this.$nextTick(回调函数)</code></p><p>作用：在下一次dom更新结束后执行其指定的回调</p><p>什么时候用：当改变数据后，要基于更新后的新dom进行某些操作时，要在nextTick所指定的回调函数中执行。</p><h1 id="todolist案例" tabindex="-1"><a class="header-anchor" href="#todolist案例" aria-hidden="true">#</a> ToDoList案例</h1><p>src/main.js</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>import Vue from &#39;vue&#39;
import App from &#39;./App.vue&#39;

Vue.config.productionTip = false

new Vue({
  render: h =&gt; h(App),
  beforeCreate(){
    Vue.prototype.$bus = this;
  }
}).$mount(&#39;#app&#39;)

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>src/App.vue</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&lt;template&gt;
  &lt;div id=&quot;app&quot;&gt;
    &lt;div class=&quot;todo-container&quot;&gt;
      &lt;div class=&quot;todo-wrap&quot;&gt;
        &lt;!-- &lt;MyHeader :addTodo=&quot;addTodo&quot; /&gt; --&gt;
        &lt;!-- 添加自定义事件 --&gt;
        &lt;MyHeader @addTodo=&quot;addTodo&quot; /&gt;
        &lt;!-- &lt;MyList :todos=&quot;todos&quot; :checkTodo=&quot;checkTodo&quot; :deleteTodo=&quot;deleteTodo&quot; /&gt; --&gt;
        &lt;MyList :todos=&quot;todos&quot; /&gt;
        &lt;MyFooter :todos=&quot;todos&quot; @checkAllTodo=&quot;checkAllTodo&quot; @clearAllTodo=&quot;clearAllTodo&quot; /&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import MyHeader from &#39;./components/MyHeader.vue&#39;
import MyList from &#39;./components/MyList.vue&#39;
import MyFooter from &#39;./components/MyFooter.vue&#39;
import pubsub from &#39;pubsub-js&#39;

export default {
    name: &quot;App&quot;,
    components: { MyHeader, MyList, MyFooter },
    data(){
      return {
          todos:JSON.parse(localStorage.getItem(&#39;todos&#39;)) || []
      }
    },
    methods:{
      addTodo(todoObj){
        this.todos.unshift(todoObj)
      },
      checkTodo(msgName,id){
        this.todos.forEach((todo)=&gt;{
          if(todo.id === id) todo.done = !todo.done
        })
      },
      updateTodo(id,title){
        this.todos.forEach((todo)=&gt;{
          if(todo.id === id) todo.title = title
        })
      },
      deleteTodo(id){
        this.todos = this.todos.filter(todo =&gt; todo.id !== id)
      },
      checkAllTodo(done){
        this.todos.forEach((todo)=&gt;{
          todo.done = done
        })
      },
      clearAllTodo(){
        this.todos = this.todos.filter(todo =&gt; !todo.done)
      }
    },
    watch:{
      // todos(value){
        // localStorage.setItem(&#39;todos&#39;,JSON.stringify(value)) 
        // 单纯的监视不会检测到对象内部数值的变化,比如这里的勾选done的true和false
      // }
      todos:{
        deep:true,
        handler(value){
          localStorage.setItem(&#39;todos&#39;,JSON.stringify(value)) 
        }
      }
    },
    mounted(){
      this.pubId = pubsub.subscribe(&#39;checkTodo&#39;,this.checkTodo);
      this.$bus.$on(&#39;deleteTodo&#39;,this.deleteTodo);
      this.$bus.$on(&#39;updateTodo&#39;,this.updateTodo);
    },
    destroyed(){
      pubsub.unsubscribe(this.$childrenpubId);
      this.$bus.$off(&#39;deleteTodo&#39;);
      this.$bus.$off(&#39;updateTodo&#39;);
    }
}

&lt;/script&gt;

&lt;style&gt;
/*base*/
body {
  background: #fff;
}

.btn {
  display: inline-block;
  padding: 4px 12px;
  margin-bottom: 0;
  font-size: 14px;
  line-height: 20px;
  text-align: center;
  vertical-align: middle;
  cursor: pointer;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
  border-radius: 4px;
}

.btn-danger {
  color: #fff;
  background-color: #da4f49;
  border: 1px solid #bd362f;
}
.btn-edit {
  color: #fff;
  background-color: #49acda;
  border: 1px solid #2f89bd;
  margin-right: 5px;
}

.btn-danger:hover {
  color: #fff;
  background-color: #bd362f;
}

.btn:focus {
  outline: none;
}

.todo-container {
  width: 600px;
  margin: 0 auto;
}

.todo-container .todo-wrap {
  padding: 10px;
  border: 1px solid #ddd;
  border-radius: 5px;
}
&lt;/style&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>src/components/myHeader.vue</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&lt;template&gt;
    &lt;div class=&quot;todo-header&quot;&gt;
        &lt;input type=&quot;text&quot; placeholder=&quot;请输入你的任务名称，按回车键确认&quot; v-model=&quot;title&quot; @keyup.enter=&quot;add&quot;/&gt;
    &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import {nanoid} from &#39;nanoid&#39;
export default {
    name:&#39;MyHeder&#39;,
    // props:[&#39;addTodo&#39;],
    data(){
      return{
        title:&quot;&quot;
      }
    },
    methods:{
      add(){
        const todoObj = { id:nanoid(), title:this.title, done:false }
        // this.addTodo(todoObj)
        this.$emit(&quot;addTodo&quot;,todoObj);
        this.title = &quot;&quot;
      }
    }
}
&lt;/script&gt;

&lt;style scoped&gt;
/*header*/
.todo-header input {
  width: 560px;
  height: 28px;
  font-size: 14px;
  border: 1px solid #ccc;
  border-radius: 4px;
  padding: 4px 7px;
}

.todo-header input:focus {
  outline: none;
  border-color: rgba(82, 168, 236, 0.8);
  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(82, 168, 236, 0.6);
}
&lt;/style&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>src/components/myList.vue</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&lt;template&gt;
  &lt;ul class=&quot;todo-main&quot;&gt;
    &lt;MyItem v-for=&quot;todoObj in todos&quot; :key=&quot;todoObj.id&quot; :todo=&quot;todoObj&quot; :checkTodo=&quot;checkTodo&quot; :deleteTodo=&quot;deleteTodo&quot;/&gt;
  &lt;/ul&gt;
&lt;/template&gt;

&lt;script&gt;
import MyItem from &#39;./MyItem&#39;
export default {
    name:&#39;MyList&#39;,
    components:{MyItem},
    props:[&#39;todos&#39;,&#39;checkTodo&#39;,&#39;deleteTodo&#39;]
}
&lt;/script&gt;
&lt;style scoped&gt;
/*main*/
.todo-main {
  margin-left: 0px;
  border: 1px solid #ddd;
  border-radius: 2px;
  padding: 0px;
}

.todo-empty {
  height: 40px;
  line-height: 40px;
  border: 1px solid #ddd;
  border-radius: 2px;
  padding-left: 5px;
  margin-top: 10px;
}
&lt;/style&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>src/components/myItem.vue</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&lt;template&gt;
    &lt;li&gt;
        &lt;label&gt;
            &lt;input type=&quot;checkbox&quot; :checked=&quot;todo.done&quot; @change=&quot;handleCheck(todo.id)&quot; /&gt;
            &lt;!-- &lt;input type=&quot;checkbox&quot;  v-model=&quot;todo.done&quot; /&gt; --&gt;
            &lt;span v-show=&quot;!todo.isEdit&quot;&gt;{{todo.title}}&lt;/span&gt;
            &lt;input v-show=&quot;todo.isEdit&quot; type=&quot;text&quot; :value=&quot;todo.title&quot; ref=&quot;inputTitle&quot; @blur=&quot;handleBlur(todo,$event)&quot;&gt;
        &lt;/label&gt;
        &lt;button class=&quot;btn btn-danger&quot; @click=&quot;handleDelete(todo.id)&quot;&gt;删除&lt;/button&gt;
        &lt;button class=&quot;btn btn-edit&quot; v-show=&quot;!todo.isEdit&quot; @click=&quot;handleEdit(todo)&quot;&gt;编辑&lt;/button&gt;
    &lt;/li&gt;
&lt;/template&gt;

&lt;script&gt;
import pubsub from &#39;pubsub-js&#39;

export default {
    name: &#39;MyItem&#39;,
    // props:[&#39;todo&#39;,&#39;checkTodo&#39;,&#39;deleteTodo&#39;],
    props:[&#39;todo&#39;],
    methods:{
        handleCheck(id){
            // this.checkTodo(id)
            // this.$bus.$emit(&#39;checkTodo&#39;,id);
            pubsub.publish(&#39;checkTodo&#39;,id);
        },
        handleDelete(id){
            // this.deleteTodo(id)
            this.$bus.$emit(&#39;deleteTodo&#39;,id);
        },
        handleEdit(todo){
            // todo.isEdit = true;//dame
            // console.log(todo);//会有isEdit属性但不是响应式的，没有getset方法
            if(todo.isEdit != undefined){//或者todo.hasOwnProperty.call(&#39;isEdit&#39;)，检测todo中有无isEdit这个属性
                todo.isEdit = true;
            }else{
                this.$set(todo,&#39;isEdit&#39;,true);//给todo添加新属性
            }
            //执行本方法后inpu框才出现
            //所以要进行异步操作
            //setTimeout或者nextTick
            //定时器是异步的宏任务。需要等到全部同步任务执行结束和异步微调任务结束才能执行
            // setTimeout(()=&gt;{
            //     this.$refs.inputTitle.focus()
            // })
            this.$nextTick(function(){
                this.$refs.inputTitle.focus()
            })
        },
        handleBlur(todo,e){
            todo.isEdit = false;
            if(!e.target.value.trim()) return alert(&#39;输入不能为空！&#39;)
            this.$bus.$emit(&#39;updateTodo&#39;,todo.id,e.target.value)
        }
    }
}
&lt;/script&gt;

&lt;style scoped&gt;
/*item*/
li {
    list-style: none;
    height: 36px;
    line-height: 36px;
    padding: 0 5px;
    border-bottom: 1px solid #ddd;
}

li label {
    float: left;
    cursor: pointer;
}

li label li input {
    vertical-align: middle;
    margin-right: 6px;
    position: relative;
    top: -1px;
}

li button {
    float: right;
    display: none;
    margin-top: 3px;
}

li:before {
    content: initial;
}

li:last-child {
    border-bottom: none;
}
li:hover{
    background-color: #ddd;
}
li:hover button{
    display: block;
}
&lt;/style&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>src/components/myFooter.vue</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&lt;template&gt;
  &lt;div class=&quot;todo-footer&quot; v-show=&quot;total&quot;&gt;
        &lt;label&gt;
          &lt;input type=&quot;checkbox&quot; :checked=&quot;isAll&quot; @change=&quot;checkAll&quot;/&gt;
        &lt;/label&gt;
        &lt;span&gt;
          &lt;span&gt;已完成{{doneTotal}}&lt;/span&gt; / 全部{{total}}
        &lt;/span&gt;
        &lt;button class=&quot;btn btn-danger&quot; @click=&quot;clearAll&quot;&gt;清除已完成任务&lt;/button&gt;
      &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
    name:&#39;MyFooter&#39;,
    // props:[&#39;todos&#39;,&#39;checkAllTodo&#39;,&#39;clearAllTodo&#39;],
    props:[&#39;todos&#39;],
    computed:{
      total(){
        return this.todos.length  
      },
      doneTotal(){
        //方法一
        // let i = 0
        // this.todos.forEach((todo)=&gt;{
        //   if(todo.done) i++
        // }) 
        // return i 
        return this.todos.reduce((pre,current)=&gt;{
          console.log(&quot;#&quot;,pre,current)
          return pre + (current.done?1:0)
        },0)
      },
      isAll(){
        return this.total === this.doneTotal &amp;&amp; this.total&gt;0
      },
    },
    methods:{
      checkAll(e){
        console.log(&quot;checkall&quot;+e.target)
        // this.checkAllTodo(e.target.checked)
        this.$emit(&#39;checkAllTodo&#39;,e.target.checked)
      },
      clearAll(){
        // this.clearAllTodo()
        this.$emit(&quot;clearAllTodo&quot;)
      }
    }
}
&lt;/script&gt;

&lt;style scoped&gt;
/*footer*/
.todo-footer {
  height: 40px;
  line-height: 40px;
  padding-left: 6px;
  margin-top: 5px;
}

.todo-footer label {
  display: inline-block;
  margin-right: 20px;
  cursor: pointer;
}

.todo-footer label input {
  position: relative;
  top: -1px;
  vertical-align: middle;
  margin-right: 5px;
}

.todo-footer button {
  float: right;
  margin-top: 5px;
}
&lt;/style&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: mugibatake99@gmail.com">maiiitiam</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/vuepress-test/assets/app-f05730ba.js" defer></script>
  </body>
</html>
